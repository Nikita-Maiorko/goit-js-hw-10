{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'flatpickr/dist/themes/dark.css';\nimport {\n  convertMs,\n  addLeadingZero,\n  errorMessage,\n  enable,\n  disable,\n} from './helpers';\n\n// GLOBAL\nlet timerID = null;\nconst startButton = document.querySelector('.button');\nconst dateTimePicker = document.querySelector('#datetime-picker');\n// add disable btn styles\ndisable(startButton, 'disable-btn');\n\n// FLATPICR LIBRARY IMPLEMENT\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  // CLOSING BEHAVIOR LOGIC FOR ONCLOSE METHOD\n  onClose(selectedDates) {\n    const endDate = new Date(selectedDates[0].getTime());\n    const now = new Date().getTime();\n\n    if (endDate - now < 0) {\n      errorMessage('Please choose a date in the future');\n      return;\n    }\n\n    //make btn active\n    enable(startButton, 'disable-btn');\n    // remove prev interval, add new and start timer\n    startButton.removeEventListener('click', startTimer);\n    startButton.addEventListener('click', () => {\n      startTimer(endDate);\n      // make btn & input disabled\n      disable(startButton, 'disable-btn');\n      disable(dateTimePicker, 'disable-input');\n    });\n  },\n};\n\ntry {\n  flatpickr('#datetime-picker', options);\n} catch (err) {\n  console.error('Flatpickr initialization failed:', err);\n  errorMessage('Something went wrong. Try again.');\n}\n\n//START TIMER LOGIC\nfunction startTimer(endDate) {\n  // if prev timer exist\n  if (timerID) clearInterval(timerID);\n\n  // start timer\n  timerID = setInterval(() => {\n    const now = Date.now();\n    const timeLeft = endDate - now;\n    // convert time to d.h.m.s and adding to html\n    let timeUnits = convertMs(endDate - now);\n    displayTimer(timeUnits);\n\n    // if time on timer ends\n    if (timeLeft <= 0) {\n      clearInterval(timerID);\n      displayTimer({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n      enable(dateTimePicker, 'disable-input');\n      return;\n    }\n  }, 1000);\n}\n\n//ADDING TIME TO HTML\nfunction displayTimer(timeUnits) {\n  Object.keys(timeUnits).forEach(key => {\n    document.querySelector(`[data-${key}]`).textContent = addLeadingZero(\n      timeUnits[key]\n    );\n  });\n}\n"],"names":["timerID","startButton","dateTimePicker","disable","options","selectedDates","endDate","now","errorMessage","enable","startTimer","flatpickr","err","timeLeft","timeUnits","convertMs","displayTimer","key","addLeadingZero"],"mappings":"wHAYA,IAAIA,EAAU,KACd,MAAMC,EAAc,SAAS,cAAc,SAAS,EAC9CC,EAAiB,SAAS,cAAc,kBAAkB,EAEhEC,EAAQF,EAAa,aAAa,EAGlC,MAAMG,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACrB,MAAMC,EAAU,IAAI,KAAKD,EAAc,CAAC,EAAE,QAAO,CAAE,EAC7CE,EAAM,IAAI,KAAM,EAAC,QAAO,EAE9B,GAAID,EAAUC,EAAM,EAAG,CACrBC,EAAa,oCAAoC,EACjD,MACD,CAGDC,EAAOR,EAAa,aAAa,EAEjCA,EAAY,oBAAoB,QAASS,CAAU,EACnDT,EAAY,iBAAiB,QAAS,IAAM,CAC1CS,EAAWJ,CAAO,EAElBH,EAAQF,EAAa,aAAa,EAClCE,EAAQD,EAAgB,eAAe,CAC7C,CAAK,CACF,CACH,EAEA,GAAI,CACFS,EAAU,mBAAoBP,CAAO,CACvC,OAASQ,EAAK,CACZ,QAAQ,MAAM,mCAAoCA,CAAG,EACrDJ,EAAa,kCAAkC,CACjD,CAGA,SAASE,EAAWJ,EAAS,CAEvBN,GAAS,cAAcA,CAAO,EAGlCA,EAAU,YAAY,IAAM,CAC1B,MAAMO,EAAM,KAAK,MACXM,EAAWP,EAAUC,EAE3B,IAAIO,EAAYC,EAAUT,EAAUC,CAAG,EAIvC,GAHAS,EAAaF,CAAS,EAGlBD,GAAY,EAAG,CACjB,cAAcb,CAAO,EACrBgB,EAAa,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EAC1DP,EAAOP,EAAgB,eAAe,EACtC,MACD,CACF,EAAE,GAAI,CACT,CAGA,SAASc,EAAaF,EAAW,CAC/B,OAAO,KAAKA,CAAS,EAAE,QAAQG,GAAO,CACpC,SAAS,cAAc,SAASA,CAAG,GAAG,EAAE,YAAcC,EACpDJ,EAAUG,CAAG,CACnB,CACA,CAAG,CACH"}